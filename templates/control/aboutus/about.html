{% extends 'control/base.html' %}
{% load static %}

{% block title %} Добавить новое категория| Yola{% endblock title %}

{% block breadcrumb %}
<li class="breadcrumb-item" aria-current="page"><a href="#.">О нас</a></li>
<li class="breadcrumb-item active" aria-current="page">Добавить</li>
{% endblock breadcrumb %}
{% block add %}
{% endblock add %}

{% block page_title %}Добавить О нас{% endblock page_title %}

{% block content %}

        <div class="row">

            <!-- @@@@@@@@@ About Start @@@@@@@@@@@@@@ -->
            <div class="col-12">
              <div class="card radius-10 w-100 p-4">
                {% if base.code == "edit" %}
                <div class="alert alert-dismissible fade show py-2 bg-warning d-flex justify-content-between">
                  <div class="d-flex align-items-center">
                    <div class="fs-3 text-white"><ion-icon name="checkmark-circle-sharp"></ion-icon>
                    </div>
                    <div class="ms-3">
                      <div class="text-white">Информация о нас изменилась</div>
                    </div>
                  </div>
                  <h3 class="alert_nums text-light align-self-center">7</h3>
                </div>
                {% endif %}
                <form action="{% url 'control_about_edit' %}" method="POST" class="needs-validation" novalidate="">
                {% csrf_token %}
                <div class="card-body">
                  <div class="d-flex align-items-center mb-3">
                    <h3 class="mb-0">О нас</h3>
                    <div class="dropdown options ms-auto">
                      <button type="submit" class="btn btn-outline-primary">O'zgartirish</button>
                    </div>
                  </div>
                  <div class="row g-3 mt-2 align-items-center d-flex">
                    
                    <div class="col-12">
                      <div class="mb-3">
                        <h5 class="mb-3">Название Ru</h5>
                        <input type="text" name="title_ru" value="{{ about.title_ru }}" class="form-control has-validation" required="">
                      </div>
                    </div>

                    <div class="col-12">
                        <div class="mb-3">
                          <h5 class="mb-3">Название Уз</h5>
                          <input type="text" name="title_uz" value="{{ about.title_uz }}" class="form-control has-validation" required="">
                        </div>
                    </div>

                    <div class="col-sm-6 col-12">
                        <div class="mb-3">
                          <h5 class="mb-3">Instagram</h5>
                          <input type="text" name="instagram"  value="{{ about.instagram }}" class="form-control has-validation">
                        </div>
                    </div>

                    <div class="col-sm-6 col-12">
                        <div class="mb-3">
                          <h5 class="mb-3">Facebook</h5>
                          <input type="text" name="facebook" value="{{ about.facebook }}" class="form-control has-validation">
                        </div>
                    </div>

                    <div class="col-sm-6 col-12">
                        <div class="mb-3">
                          <h5 class="mb-3">Youtube</h5>
                          <input type="text" name="youtube" value="{{ about.youtube }}" class="form-control has-validation">
                        </div>
                    </div>

                    <div class="col-sm-6 col-12">
                        <div class="mb-3">
                          <h5 class="mb-3">Telegram</h5>
                          <input type="text" name="telegram" value="{{ about.telegram }}" class="form-control has-validation">
                        </div>
                    </div>

                    <div class="col-12">
                      <div class="mb-3">
                        <h5 class="mb-3">Ссылка на карту</h5>
                        <input type="text" name="map" value="{{ about.google_map }}" class="form-control has-validation">
                      </div>
                  </div>
                  
                  <div class="col-md-12">
                    <label for="validationCustomUsername" class="form-label">Описание RU</label>
                    <textarea id="editor1" class="form-control" required name="description_ru">{{ about.description_ru }}</textarea>
                  </div>

                  <div class="col-md-12">
                    <label for="validationCustomUsername" class="form-label">Описание UZ</label>
                    <textarea id="editor" class="form-control" required name="description_uz">{{ about.description_uz }}</textarea>
                  </div>


                    
                    </div>
                 </div>
                </form>
              </div>
             </div>
            <!-- @@@@@@@@@@@ About End @@@@@@@@@@@@@@ -->


            <!-- @@@@@@@@@ Address Start @@@@@@@@@@@@ -->
             <div class="col-12">
                <div>
                    <div id="course_lesson" class="card">
                      <div class="card-body">
                        {% if base.code == "added_address" %}
                        <div class="alert alert-dismissible fade show py-2 bg-success d-flex justify-content-between">
                          <div class="d-flex align-items-center">
                            <div class="fs-3 text-white"><ion-icon name="checkmark-circle-sharp"></ion-icon>
                            </div>
                            <div class="ms-3">
                              <div class="text-white">Адрес добавлен</div>
                            </div>
                          </div>
                          <h3 class="alert_nums text-light align-self-center">7</h3>
                        </div>
                        {% elif base.code == "edited_address" %}
                        <div class="alert alert-dismissible fade show py-2 bg-warning d-flex justify-content-between">
                          <div class="d-flex align-items-center">
                            <div class="fs-3 text-white"><ion-icon name="checkmark-circle-sharp"></ion-icon>
                            </div>
                            <div class="ms-3">
                              <div class="text-white">Адрес изменен</div>
                            </div>
                          </div>
                          <h3 class="alert_nums text-light align-self-center">7</h3>
                        </div>
                        {% elif base.code == "removed_address" %}
                        <div class="alert alert-dismissible fade show py-2 bg-danger d-flex justify-content-between">
                          <div class="d-flex align-items-center">
                            <div class="fs-3 text-white"><ion-icon name="trash-sharp"></ion-icon>
                            </div>
                            <div class="ms-3">
                              <div class="text-white">Адрес удален</div>
                            </div>
                          </div>
                          <h3 class="alert_nums text-light align-self-center">7</h3>
                        </div>
                        {% endif %}
                        <div class="d-flex justify-content-between">
                          <h4>Address</h4>
                          <div class="ms-auto d-block">
                            <div class="btn-group">
                              <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addAddress">Добавить</button>
                            </div>
                          </div>
                        </div>
                    
                        <br>
                        <div class="">
                            <table id="example" class="table table-striped table-bordered" style="width:100%">
                                <thead>
                                    <tr>
                                        <th style="width: 80%;">Адрес</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in address %}
                                    <tr>
                                        <td>{{ i.address }}</td>
                                        <td class="text-center"><button type="button" class="btn btn-warning btn-sm text-light" data-bs-toggle="modal" data-bs-target="#editAddress{{i.id}}">Деталь</button> </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                      </div>
                    </div>
          
                    <!-- Address Add Form -->
                     <form action="{% url 'control_address_add' %}" method="POST">
                    {% csrf_token %}
                      <div class="modal fade" id="addAddress" tabindex="-1" style="display: none;" aria-hidden="true">
                      
                      <div class="modal-dialog modal-lg modal-dialog-centered">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title"><b>Адрес Добавить</b></h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                          <div class="modal-body">
                            <div class="col-md-12">
                              <label for="validationCustom01" class="form-label">Адрес</label>
                              <input type="text" name="address" class="form-control" id="validationCustom01" required="">
                              <div class="invalid-feedback">Пожалуйста, введите адрес</div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="submit" class="btn btn-primary btn-sm delete">Добавить</button>
                          </div>
                        </div>
                      </div>
                    </div>  
                    </form>

                  <!-- Address Detail And Remove Form -->
                  {% for a in address %}
                  <form action="{% url 'control_address_edit' %}" method="POST">
                    {% csrf_token %}
                      <div class="modal fade" id="editAddress{{a.id}}" tabindex="-1" style="display: none;" aria-hidden="true">
                      
                      <div class="modal-dialog modal-lg modal-dialog-centered">
                        <div class="modal-content">

                          <div class="modal-header">
                            <h5 class="modal-title"><b>Адрес удалить</b></h5>
                            <a href="{% url 'control_address_remove' a.id %}"><ion-icon name="trash-sharp" class="display-6"></ion-icon> </a>
                          </div>
                          <div class="modal-body">
                            <div class="col-md-12">
                              <label for="validationCustom01" class="form-label">Адрес</label>
                              <input type="text" name="address" value="{{ a.address }}" class="form-control" id="validationCustom01" required="">
                              <div class="invalid-feedback">Пожалуйста, введите адрес</div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-light btn-sm" data-bs-dismiss="modal">Отмена</button>
                                <input type="hidden" name="address_id" value="{{ a.id }}">
                                <button type="submit" class="btn btn-warning text-white btn-sm delete">Редактировать</button>
                          </div>
                        </div>
                      </div>
                    </div>  
                    </form>
                    {% endfor %}
                    
                  </div>
             </div>
            <!-- @@@@@@@@@ Address End @@@@@@@@@@@@@@ -->


            <!-- @@@@@@@@@ Email Start @@@@@@@@@@@@@@ -->
             <div class="col-sm-6 col-12">
                <div>
                    <div id="course_lesson" class="card">
                      <div class="card-body">
                        {% if base.code == "added_email" %}
                        <div class="alert alert-dismissible fade show py-2 bg-success d-flex justify-content-between">
                          <div class="d-flex align-items-center">
                            <div class="fs-3 text-white"><ion-icon name="checkmark-circle-sharp"></ion-icon>
                            </div>
                            <div class="ms-3">
                              <div class="text-white">Эл. адрес добавлен</div>
                            </div>
                          </div>
                          <h3 class="alert_nums text-light align-self-center">7</h3>
                        </div>
                        {% elif base.code == "edited_email" %}
                        <div class="alert alert-dismissible fade show py-2 bg-warning d-flex justify-content-between">
                          <div class="d-flex align-items-center">
                            <div class="fs-3 text-white"><ion-icon name="checkmark-circle-sharp"></ion-icon>
                            </div>
                            <div class="ms-3">
                              <div class="text-white">Эл. адрес изменен</div>
                            </div>
                          </div>
                          <h3 class="alert_nums text-light align-self-center">7</h3>
                        </div>
                        {% elif base.code == "removed_email" %}
                        <div class="alert alert-dismissible fade show py-2 bg-danger d-flex justify-content-between">
                          <div class="d-flex align-items-center">
                            <div class="fs-3 text-white"><ion-icon name="trash-sharp"></ion-icon>
                            </div>
                            <div class="ms-3">
                              <div class="text-white">Эл. адрес удален</div>
                            </div>
                          </div>
                          <h3 class="alert_nums text-light align-self-center">7</h3>
                        </div>
                        {% endif %}
                        <div class="d-flex justify-content-between">
                          <h4>Эл. адрес</h4>
                          <div class="ms-auto d-block">
                            <div class="btn-group">
                              <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addEmail">Добавить</button>
                            </div>
                          </div>
                        </div>
                    
                        <br>
                        <div class="">
                            <table id="example" class="table table-striped table-bordered" style="width:100%">
                                <thead>
                                    <tr>
                                        <th style="width: 80%;">Эл. адрес</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in email %}
                                    <tr>
                                        <td>{{ i.email }}</td>
                                        <td class="text-center"><button type="button" class="btn btn-warning btn-sm text-light" data-bs-toggle="modal" data-bs-target="#editEmail{{i.id}}">Деталь</button> </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                      </div>
                    </div>
          
                    <!-- Address Add Form -->
                    <form action="{% url 'control_email_add' %}" method="POST">
                      {% csrf_token %}
                        <div class="modal fade" id="addEmail" tabindex="-1" style="display: none;" aria-hidden="true">
                        
                        <div class="modal-dialog modal-lg modal-dialog-centered">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title"><b>Эл. адрес Добавить</b></h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                              <div class="col-md-12">
                                <label for="validationCustom01" class="form-label">Эл. адрес</label>
                                <input type="email" name="email" class="form-control" id="validationCustom01" required="">
                                <div class="invalid-feedback">Пожалуйста, введите Эл. адрес</div>
                              </div>
                            </div>
                            <div class="modal-footer">
                              <button type="submit" class="btn btn-primary btn-sm delete">Добавить</button>
                            </div>
                          </div>
                        </div>
                      </div>  
                      </form>
  
                    <!-- Address Detail And Remove Form -->
                    {% for e in email %}
                    <form action="{% url 'control_email_edit' %}" method="POST">
                      {% csrf_token %}
                        <div class="modal fade" id="editEmail{{e.id}}" tabindex="-1" style="display: none;" aria-hidden="true">
                        
                        <div class="modal-dialog modal-lg modal-dialog-centered">
                          <div class="modal-content">
  
                            <div class="modal-header">
                              <h5 class="modal-title"><b>Адрес удалить</b></h5>
                              <a href="{% url 'control_email_remove' e.id %}"><ion-icon name="trash-sharp" class="display-6"></ion-icon> </a>
                            </div>
                            <div class="modal-body">
                              <div class="col-md-12">
                                <label for="validationCustom01" class="form-label">Адрес</label>
                                <input type="email" name="email" value="{{ e.email }}" class="form-control" id="validationCustom01" required="">
                                <div class="invalid-feedback">Пожалуйста, введите адрес</div>
                              </div>
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-light btn-sm" data-bs-dismiss="modal">Отмена</button>
                                  <input type="hidden" name="email_id" value="{{ e.id }}">
                                  <button type="submit" class="btn btn-warning text-white btn-sm delete">Редактировать</button>
                            </div>
                          </div>
                        </div>
                      </div>  
                      </form>
                      {% endfor %}
                    
                  </div>
             </div>
            <!-- @@@@@@@@@@@ Email End @@@@@@@@@@@@@@ -->


            <!-- @@@@@@@@@ Phone Start @@@@@@@@@@@@@@ -->
            <div class="col-sm-6 col-12">
              <div>
                  <div id="course_lesson" class="card">
                    <div class="card-body">
                      {% if base.code == "added_phone" %}
                      <div class="alert alert-dismissible fade show py-2 bg-success d-flex justify-content-between">
                        <div class="d-flex align-items-center">
                          <div class="fs-3 text-white"><ion-icon name="checkmark-circle-sharp"></ion-icon>
                          </div>
                          <div class="ms-3">
                            <div class="text-white">Телефон добавлен</div>
                          </div>
                        </div>
                        <h3 class="alert_nums text-light align-self-center">7</h3>
                      </div>
                      {% elif base.code == "edited_phone" %}
                      <div class="alert alert-dismissible fade show py-2 bg-warning d-flex justify-content-between">
                        <div class="d-flex align-items-center">
                          <div class="fs-3 text-white"><ion-icon name="checkmark-circle-sharp"></ion-icon>
                          </div>
                          <div class="ms-3">
                            <div class="text-white">Телефон изменен</div>
                          </div>
                        </div>
                        <h3 class="alert_nums text-light align-self-center">7</h3>
                      </div>
                      {% elif base.code == "removed_phone" %}
                      <div class="alert alert-dismissible fade show py-2 bg-danger d-flex justify-content-between">
                        <div class="d-flex align-items-center">
                          <div class="fs-3 text-white"><ion-icon name="trash-sharp"></ion-icon>
                          </div>
                          <div class="ms-3">
                            <div class="text-white">Телефон удален</div>
                          </div>
                        </div>
                        <h3 class="alert_nums text-light align-self-center">7</h3>
                      </div>
                      {% endif %}
                      <div class="d-flex justify-content-between">
                        <h4>Телефон</h4>
                        <div class="ms-auto d-block">
                          <div class="btn-group">
                            <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addPhone">Добавить</button>
                          </div>
                        </div>
                      </div>
                  
                      <br>
                      <div class="">
                          <table id="example" class="table table-striped table-bordered" style="width:100%">
                              <thead>
                                  <tr>
                                      <th style="width: 80%;">Телефон</th>
                                      <th></th>
                                  </tr>
                              </thead>
                              <tbody>
                                  {% for i in phone %}
                                  <tr>
                                      <td>{{ i.phone }}</td>
                                      <td class="text-center"><button type="button" class="btn btn-warning btn-sm text-light" data-bs-toggle="modal" data-bs-target="#editPhone{{i.id}}">Деталь</button> </td>
                                  </tr>
                                  {% endfor %}
                              </tbody>
                          </table>
                      </div>
                    </div>
                  </div>
        
                  <!-- Address Add Form -->
                  <form action="{% url 'control_phone_add' %}" method="POST">
                    {% csrf_token %}
                      <div class="modal fade" id="addPhone" tabindex="-1" style="display: none;" aria-hidden="true">
                      
                      <div class="modal-dialog modal-lg modal-dialog-centered">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title"><b>Телефон Добавить</b></h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                          <div class="modal-body">
                            <div class="col-md-12">
                              <label for="validationCustom01" class="form-label">Телефон</label>
                              <input type="number" name="phone" class="form-control" id="validationCustom01" required="">
                              <div class="invalid-feedback">Пожалуйста, введите Телефон</div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="submit" class="btn btn-primary btn-sm delete">Добавить</button>
                          </div>
                        </div>
                      </div>
                    </div>  
                    </form>

                  <!-- Address Detail And Remove Form -->
                  {% for p in phone %}
                  <form action="{% url 'control_phone_edit' %}" method="POST">
                    {% csrf_token %}
                      <div class="modal fade" id="editPhone{{p.id}}" tabindex="-1" style="display: none;" aria-hidden="true">
                      
                      <div class="modal-dialog modal-lg modal-dialog-centered">
                        <div class="modal-content">

                          <div class="modal-header">
                            <h5 class="modal-title"><b>Адрес удалить</b></h5>
                            <a href="{% url 'control_phone_remove' p.id %}"><ion-icon name="trash-sharp" class="display-6"></ion-icon> </a>
                          </div>
                          <div class="modal-body">
                            <div class="col-md-12">
                              <label for="validationCustom01" class="form-label">Адрес</label>
                              <input type="number" name="phone" value="{{ p.phone }}" class="form-control" id="validationCustom01" required="">
                              <div class="invalid-feedback">Пожалуйста, введите адрес</div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-light btn-sm" data-bs-dismiss="modal">Отмена</button>
                                <input type="hidden" name="phone_id" value="{{ p.id }}">
                                <button type="submit" class="btn btn-warning text-white btn-sm delete">Редактировать</button>
                          </div>
                        </div>
                      </div>
                    </div>  
                    </form>
                    {% endfor %}
                  
                </div>
           </div>
            <!-- @@@@@@@@@@@ Phone End @@@@@@@@@@@@@@ -->
             

          </div>

{% endblock content %}

{% block js_content %}
<script src="{% static 'control/assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js' %}"></script>
<script>
  // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
      'use strict'

      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      var forms = document.querySelectorAll('.needs-validation')

      // Loop over them and prevent submission
      Array.prototype.slice.call(forms)
      .forEach(function (form) {
        form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
        }, false)
      })
    })()
</script>

<script>
  ClassicEditor.defaultConfig = { 
    toolbar: { 
      items: [ 
        'heading', 
        '|', 
        'bold', 
        'italic', 
        '|', 
        'bulletedList', 
        'numberedList', 
        '|', 
        'insertTable', 
        '|', 
 
        'undo', 
        'redo' 
      ] 
    }, 
 
    table: { 
      contentToolbar: ['tableColumn', 'tableRow', 'mergeTableCells'] 
    }, 
    language: 'en' 
  }; 
  ClassicEditor.create(document.querySelector("#editor")).catch((error) => { 
    console.error(error); 
  });
  ClassicEditor.create(document.querySelector("#editor1")).catch((error) => { 
    console.error(error); 
  });
</script>


<script>
    setInterval(myTimer, 1000);
    function myTimer() {
        const d = new Date();
        let cc = document.querySelectorAll('.alert_nums');
        cc.forEach(element => {
            element.innerHTML -= 1
        })
    }
    setInterval(()=> $(".alert").alert('close'), 6000)
  </script>
{% endblock js_content %}